# AIコードリバースエンジニアリングシステム - タスクリスト

## タスク状況トラッカー

| 状態 | 意味 |
|------|------|
| 🔄 | 進行中 |
| ✅ | 完了 |
| ⏳ | 保留中 |
| 🔜 | 次のタスク |
| 📝 | 未着手 |

## 着手順タスクリスト (Next Actions)

1. Zodスキーマ定義  
2. CLIフレームワーク基本実装（引数パーサー・ログ・プログレスバー）  
3. Tree-sitterセットアップ（JavaScript/TypeScript）  
4. パッケージマネージャー統合（npm/yarn/pnpm対応）  
5. import/require文解析（JavaScript/TypeScript）  
6. サイクロマティック複雑度など基本メトリクス実装  
7. LLM APIクライアント（OpenAI）＋プロンプト管理システム  
8. 基本YAML構造生成  
9. 単体テスト拡充  

## フェーズ1: 基盤構築

### 1.1 プロジェクト初期化とセットアップ
- [x] ✅ Bunプロジェクト初期化
- [x] ✅ TypeScript設定（tsconfig.json）
- [x] ✅ ESLint + Prettierセットアップ
- [x] ✅ 基本ディレクトリ構造作成
- [ ] ⏳ 開発用Docker環境構築
- [ ] ⏳ GitHub Actions CI設定

### 1.2 コアデータモデル
- [ ] 🔜 Zodスキーマ定義
  - [ ] 📝 プロジェクトスキーマ
  - [ ] 📝 ファイルスキーマ
  - [ ] 📝 シンボルスキーマ（クラス、関数など）
  - [ ] 📝 依存関係スキーマ
  - [ ] 📝 複雑度メトリクススキーマ
- [ ] 📝 データモデル操作ユーティリティ

### 1.3 ファイルシステム解析
- [ ] 🔄 ファイルシステム解析基盤
  - [x] ✅ 再帰的ディレクトリ走査
  - [x] ✅ .gitignore処理
  - [x] ✅ ファイルタイプ分類
  - [x] ✅ メタデータ抽出
  - [ ] 📝 ファイルストリーム最適化

### 1.4 言語検出
- [x] ✅ 拡張子ベース基本言語識別
- [ ] 📝 コンテンツベース言語識別
- [ ] 📝 プロジェクト言語統計生成
- [ ] 📝 主要言語決定アルゴリズム

### 1.5 CLIフレームワーク
- [ ] 🔜 コマンドライン引数パーサー
- [ ] 📝 プログレスバー表示
- [ ] 📝 構造化ログ出力
- [ ] 📝 エラーハンドリング
- [ ] 📝 ヘルプドキュメント自動生成

## フェーズ2: 依存関係と静的解析

### 2.1 依存関係解析
- [ ] 📝 パッケージマネージャー統合
  - [~] 📝 npm/yarn/pnpm対応（package.json）
  - [ ] 📝 Python依存解析（requirements.txt等）
  - [ ] 📝 その他言語対応プラグイン構造
- [ ] 🔜 import/require文解析
  - [ ] 🔜 JavaScript/TypeScript解析
  - [ ] 📝 Python解析
  - [ ] 📝 他言語プラグイン構造
- [ ] 📝 依存グラフ構築
  - [ ] 📝 ノード構造（ファイル/モジュール）
  - [ ] 📝 エッジ構造（依存関係タイプ）
  - [ ] 📝 循環依存検出
  - [ ] 📝 依存度メトリクス計算

### 2.2 AST解析基盤
- [ ] 🔜 Tree-sitterセットアップ
  - [ ] 🔜 JavaScript/TypeScript文法
  - [ ] 📝 Python文法
  - [ ] 📝 他言語拡張構造
- [ ] 📝 AST走査ユーティリティ
- [ ] 📝 シンボル抽出
  - [ ] 📝 クラス・関数抽出
  - [ ] 📝 変数・定数抽出
  - [ ] 📝 インターフェース・型定義抽出
- [ ] 📝 コードブロック抽出

### 2.3 メトリクス計測
- [ ] 📝 複雑度計測
  - [ ] 🔜 サイクロマティック複雑度
  - [ ] 📝 認知的複雑度
  - [ ] 📝 Halstead複雑度
- [ ] 📝 コード品質指標
  - [ ] 📝 保守性指標
  - [ ] 📝 テスト容易性
- [ ] 📝 コードスメル検出
  - [ ] 📝 重複コード
  - [ ] 📝 過度に大きな関数/クラス
  - [ ] 📝 過度に複雑な条件分岐

### 2.4 パターン検出
- [ ] 📝 デザインパターン認識
  - [ ] 📝 Singleton検出
  - [ ] 📝 Factory検出
  - [ ] 📝 他主要パターン
- [ ] 📝 アーキテクチャパターン認識
  - [ ] 📝 MVC/MVVMパターン
  - [ ] 📝 レイヤードアーキテクチャ
- [ ] 📝 言語特有イディオム検出

## フェーズ3: AI統合と意味解析

### 3.1 AI連携基盤
- [ ] 📝 LLM APIクライアント
  - [ ] 📝 OpenAI連携
  - [ ] 📝 Google Gemini連携
  - [ ] 📝 フォールバック戦略
- [ ] 📝 プロンプト管理システム
  - [ ] 📝 テンプレートエンジン
  - [ ] 📝 言語固有プロンプト
  - [ ] 📝 コンテキスト管理
- [ ] 📝 APIキャッシュとレート制限
- [ ] 📝 並列リクエスト最適化

### 3.2 プロンプト設計と最適化
- [ ] 📝 コード目的分析プロンプト
- [ ] 📝 関数/メソッド分析プロンプト
- [ ] 📝 クラス構造分析プロンプト
- [ ] 📝 アーキテクチャ推定プロンプト
- [ ] 📝 問題箇所特定プロンプト
- [ ] 📝 Chain-of-Thoughtプロンプト設計

### 3.3 意味解析パイプライン
- [ ] 📝 ファイルレベル分析
  - [ ] 📝 ファイル目的抽出
  - [ ] 📝 ファイル責任範囲特定
- [ ] 📝 関数/メソッドレベル分析
  - [ ] 📝 目的説明生成
  - [ ] 📝 アルゴリズム特定
  - [ ] 📝 パラメータ・戻り値説明
- [ ] 📝 クラスレベル分析
  - [ ] 📝 クラス責任特定
  - [ ] 📝 設計パターン確認
  - [ ] 📝 継承・実装関係説明
- [ ] 📝 モジュールレベル分析
  - [ ] 📝 アーキテクチャ要素特定
  - [ ] 📝 モジュール間連携説明

### 3.4 AI応答処理
- [ ] 📝 構造化パース
- [ ] 📝 信頼性評価
- [ ] 📝 矛盾検出と解決
- [ ] 📝 追加質問生成
- [ ] 📝 データモデル統合

## フェーズ4: ドキュメント生成

### 4.1 YAML生成エンジン
- [ ] 📝 基本YAML構造生成
- [ ] 📝 ネスト構造最適化
- [ ] 📝 相互参照処理
- [ ] 📝 複雑オブジェクト処理
- [ ] 📝 マルチドキュメント対応

### 4.2 ドキュメント検証
- [ ] 📝 スキーマ検証
- [ ] 📝 相互参照整合性
- [ ] 📝 AI妥当性評価
- [ ] 📝 不足情報検出
- [ ] 📝 バージョニング

### 4.3 代替出力形式
- [ ] 📝 JSON変換
- [ ] 📝 Markdown生成
- [ ] 📝 HTML生成
- [ ] 📝 カスタムテンプレート

## フェーズ5: Web APIとフロントエンド

### 5.1 APIサーバー
- [ ] 📝 基本サーバーセットアップ（Hono）
- [ ] 📝 REST APIエンドポイント
  - [ ] 📝 プロジェクト情報API
  - [ ] 📝 ファイル情報API
  - [ ] 📝 解析実行API
  - [ ] 📝 結果取得API
- [ ] 📝 WebSocket更新通知
- [ ] 📝 認証・認可（必要に応じて）

### 5.2 フロントエンド基盤
- [ ] 📝 React + TypeScript設定
- [ ] 📝 コンポーネント設計
- [ ] 📝 状態管理
- [ ] 📝 APIクライアント
- [ ] 📝 テスト環境

### 5.3 UIコンポーネント
- [ ] 📝 プロジェクトビューア
- [ ] 📝 ファイルエクスプローラ
- [ ] 📝 コードビューア（Monaco）
- [ ] 📝 依存グラフ可視化
- [ ] 📝 メトリクスダッシュボード
- [ ] 📝 解析結果ビューア

## フェーズ6: テストと最適化

### 6.1 テスト拡充
- [ ] 📝 単体テスト
  - [ ] 📝 コアデータモデル
  - [ ] 📝 ファイルシステム解析
  - [ ] 📝 静的解析コンポーネント
  - [ ] 📝 AIプロンプト
- [ ] 📝 統合テスト
  - [ ] 📝 エンドツーエンドパイプライン
  - [ ] 📝 APIエンドポイント
- [ ] 📝 パフォーマンステスト
  - [ ] 📝 大規模プロジェクト処理
  - [ ] 📝 メモリ使用最適化

### 6.2 パフォーマンス最適化
- [ ] 📝 並列処理最適化
- [ ] 📝 ストリーム処理
- [ ] 📝 キャッシュ戦略
- [ ] 📝 増分更新処理
- [ ] 📝 メモリ使用最適化

### 6.3 拡張性
- [ ] 📝 プラグインシステム
  - [ ] 📝 言語プラグイン
  - [ ] 📝 解析プラグイン
  - [ ] 📝 出力フォーマットプラグイン
- [ ] 📝 カスタム設定
  - [ ] 📝 解析深度設定
  - [ ] 📝 フィルター設定
  - [ ] 📝 出力カスタマイズ

## フェーズ7: リファクタリング支援

### 7.1 問題検出と優先順位付け
- [ ] 📝 複雑度ベース問題検出
- [ ] 📝 パターン違反検出
- [ ] 📝 重複コード検出
- [ ] 📝 問題箇所ランキング

### 7.2 リファクタリング提案
- [ ] 📝 AIベースリファクタリング提案
- [ ] 📝 具体的コード変更生成
- [ ] 📝 リファクタリング優先順位付け
- [ ] 📝 前後比較プレビュー

### 7.3 変更影響解析
- [ ] 📝 変更影響範囲計算
- [ ] 📝 影響度スコアリング
- [ ] 📝 テスト必要箇所特定
- [ ] 📝 安全性評価

## 優先実装項目（初期1ヶ月）

特に重要かつ最初に実装すべき優先度の高いタスク：

### 優先度最高（最初の2週間）
1. プロジェクト初期化とセットアップ
2. Zodスキーマ定義
3. ファイルシステム解析基盤
4. 基本的な言語検出
5. CLIフレームワーク基本実装
6. JavaScript/TypeScript AST解析基盤

### 優先度高（3-4週間目）
1. パッケージ依存関係（npm）解析
2. import/require解析（JavaScript/TypeScript）
3. 基本的な複雑度メトリクス
4. OpenAI連携基盤
5. 初期プロンプト設計
6. 基本的なYAML出力

### デモに必要な最小機能セット（1ヶ月時点）
- TypeScriptプロジェクトのファイル構造解析
- 基本的なメタデータと依存関係の抽出
- シンボル（関数・クラス）抽出と基本情報
- 基本的なAI解析（ファイル・関数の目的推測）
- シンプルなYAML形式出力
- 基本的なCLIインターフェース
